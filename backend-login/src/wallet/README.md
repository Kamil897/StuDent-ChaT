# –°–∏—Å—Ç–µ–º–∞ –ö–æ—à–µ–ª—å–∫–∞

## –û–ø–∏—Å–∞–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –∫–æ—à–µ–ª—å–∫–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –≤–∞–ª—é—Ç–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –º–æ–Ω–µ—Ç–∞–º–∏, –∫—Ä–∏—Å—Ç–∞–ª–ª–∞–º–∏ –∏ –æ—á–∫–∞–º–∏ –∫–∞—Ä–º—ã.

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### User (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è)
- `coins` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç
- `crystals` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤
- `karmaPoints` - –æ—á–∫–∏ –∫–∞—Ä–º—ã

### WalletTransaction
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `userId` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `type` - —Ç–∏–ø: "deposit", "withdraw", "transfer", "reward"
- `amount` - —Å—É–º–º–∞
- `currency` - –≤–∞–ª—é—Ç–∞: "coins", "crystals", "points"
- `source` - –∏—Å—Ç–æ—á–Ω–∏–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `createdAt` - –¥–∞—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

## API Endpoints

### GET /wallet/balance
–ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### POST /wallet/add
–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å
```json
{
  "amount": 100,
  "currency": "coins",
  "source": "game_reward"
}
```

### POST /wallet/spend
–ü–æ—Ç—Ä–∞—Ç–∏—Ç—å –≤–∞–ª—é—Ç—É
```json
{
  "amount": 50,
  "currency": "crystals",
  "source": "shop_purchase"
}
```

### POST /wallet/transfer
–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤–∞–ª—é—Ç—É –¥—Ä—É–≥—É
```json
{
  "toUserId": 123,
  "amount": 25,
  "currency": "coins"
}
```

### GET /wallet/transactions
–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### GET /wallet/stats
–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

## –¢–∏–ø—ã –≤–∞–ª—é—Ç

### –ú–æ–Ω–µ—Ç—ã (ü™ô)
- –û—Å–Ω–æ–≤–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –≤–∞–ª—é—Ç–∞
- –ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –∏–≥—Ä–∞—Ö
- –¢—Ä–∞—Ç—è—Ç—Å—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ

### –ö—Ä–∏—Å—Ç–∞–ª–ª—ã (üíé)
- –ü—Ä–µ–º–∏—É–º –≤–∞–ª—é—Ç–∞
- –ü–æ–∫—É–ø–∞—é—Ç—Å—è –∑–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–π

### –û—á–∫–∏ –∫–∞—Ä–º—ã (üåü)
- –ù–∞–≥—Ä–∞–¥—ã –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- –ù–µ —Ç—Ä–∞—Ç—è—Ç—Å—è, —Ç–æ–ª—å–∫–æ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è

## –¢–∏–ø—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

- **deposit** - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- **withdraw** - —Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
- **transfer** - –ø–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **reward** - –Ω–∞–≥—Ä–∞–¥–∞ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–∞–º–∏

```typescript
// –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –∏–≥—Ä—É
await walletService.addCoins(userId, score / 10, 'game_reward');

// –ü–æ–∫—É–ø–∫–∞ –≤ –∏–≥—Ä–µ
await walletService.spendCoins(userId, itemPrice, 'game_purchase');
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏

```typescript
// –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
await walletService.addCoins(userId, achievement.points, 'achievement_reward');
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–∞–≥–∞–∑–∏–Ω–æ–º

```typescript
// –ü–æ–∫—É–ø–∫–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
await walletService.spendCrystals(userId, product.price, 'shop_purchase');

// –î–æ–Ω–∞—Ç
await walletService.addCrystals(userId, donation.amount, 'donation');
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–µ–¥ —Å–ø–∏—Å–∞–Ω–∏–µ–º
- –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–≥—Ä–æ–∫ –≤—ã–∏–≥—Ä–∞–ª –∏–≥—Ä—É
```typescript
const score = 1500;
const coinsEarned = Math.floor(score / 10); // 150 –º–æ–Ω–µ—Ç
await walletService.addCoins(userId, coinsEarned, 'snake_game');
```

### –ü–æ–∫—É–ø–∫–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
```typescript
const product = { price: 100, currency: 'crystals' };
await walletService.spendCrystals(userId, product.price, 'shop_purchase');
```

### –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
```typescript
const achievement = { points: 50 };
await walletService.addCoins(userId, achievement.points, 'achievement_unlocked');
```




